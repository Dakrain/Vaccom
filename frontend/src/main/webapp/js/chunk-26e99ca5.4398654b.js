(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26e99ca5"],{"0e8f":function(t,e,a){"use strict";a("20f6");var n=a("e8f2");e["a"]=Object(n["a"])("flex")},"0ec7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"admin"===t.userLogin["role_name"]?a("div",[a("v-container",{style:"xs"===t.breakpointName||"sm"===t.breakpointName?"padding-top: 75px":"",attrs:{id:"users",fluid:"",tag:"section"}},[a("base-material-card",{staticClass:"px-5 py-3",staticStyle:{"margin-top":"20px"},attrs:{icon:"mdi-clipboard-text",title:"Danh sách địa bàn cơ sở"}},[a("v-flex",{staticClass:"mx-4 mt-3"},[a("div",{staticClass:"mb-3"},[t._v("Chọn cơ sở y tế")]),a("v-autocomplete",{staticClass:"flex xs12 md12",attrs:{"hide-no-data":"",items:t.listCoSoYTe,"item-text":"tenCoSo","item-value":"id",outlined:"",dense:"","hide-details":"auto",clearable:""},model:{value:t.coSoYTeSearch,callback:function(e){t.coSoYTeSearch=e},expression:"coSoYTeSearch"}})],1),a("v-card-text",{class:"lg"!==t.breakpointName?"px-0":""},[a("div",{class:"xs"===t.breakpointName?"mb-3":"d-flex mb-3"},["xs"===t.breakpointName?a("div",{staticClass:"mr-auto pt-2 mb-3"},[t._v(" Tổng số: "),a("span",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v(t._s(t.totalItem))]),t._v(" địa bàn ")]):a("span",{staticClass:"mr-auto pt-2"},[t._v(" Tổng số: "),a("span",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v(t._s(t.totalItem))]),t._v(" địa bàn ")]),a("v-btn",{staticClass:"mx-0",attrs:{color:"#0072bc"},on:{click:function(e){return e.stopPropagation(),t.addMember("add")}}},[a("v-icon",{attrs:{left:"",size:"22"}},[t._v(" mdi-plus ")]),t._v(" Thêm địa bàn ")],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"hide-default-footer":"","no-data-text":"Không có",loading:t.loadingData,"loading-text":"Đang tải... ","items-per-page":t.itemsPerPage},scopedSlots:t._u([{key:"item.index",fn:function(e){e.item;var n=e.index;return[a("span",[t._v(t._s(n+1))])]}},{key:"item.action",fn:function(e){var n=e.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"blue",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.addMember("update",n)}}},"v-btn",o,!1),i),[a("v-icon",{attrs:{size:"22"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[a("span",[t._v("Sửa")])])]}}],null,!1,4238259214)}),t.pageCount?a("pagination",{attrs:{pageInput:t.page,pageCount:t.pageCount},on:{"tiny:change-page":t.changePage}}):t._e()],1)],1),a("v-dialog",{attrs:{"max-width":"900"},model:{value:t.dialogAddMember,callback:function(e){t.dialogAddMember=e},expression:"dialogAddMember"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"#0072bc"}},["add"===t.typeAction?a("v-toolbar-title",[t._v("Thêm địa bàn cơ sở")]):a("v-toolbar-title",[t._v("Cập nhật thông tin")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialogAddMember=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("v-card-text",{staticClass:"mt-5"},[a("v-form",{ref:"formAddMember",attrs:{"lazy-validation":""},model:{value:t.validFormAdd,callback:function(e){t.validFormAdd=e},expression:"validFormAdd"}},[a("v-layout",{attrs:{wrap:""}},[a("v-text-field",{staticClass:"flex xs12 md12",attrs:{outlined:"",rules:t.required,required:"",label:"Tên địa bàn","prepend-inner-icon":"mdi-account-check-outline",dense:"",clearable:""},model:{value:t.thongTinDiaBan.TenDiaBan,callback:function(e){t.$set(t.thongTinDiaBan,"TenDiaBan",e)},expression:"thongTinDiaBan.TenDiaBan"}}),a("v-autocomplete",{staticClass:"flex xs12 md12",attrs:{"hide-no-data":"",items:t.listCoSoYTe,"item-text":"tenCoSo","item-value":"id",clearable:"",outlined:"",label:"Cơ sở y tế",dense:""},model:{value:t.coSoYTe,callback:function(e){t.coSoYTe=e},expression:"coSoYTe"}}),a("v-autocomplete",{staticClass:"flex xs12 md4",attrs:{"hide-no-data":"",items:t.listTinhThanh,"item-text":"tinhThanhTen","item-value":"tinhThanhMa",clearable:"",rules:t.required,required:"",outlined:"",label:"Tỉnh/ Thành phố",dense:""},model:{value:t.tinhThanh,callback:function(e){t.tinhThanh=e},expression:"tinhThanh"}}),a("v-autocomplete",{staticClass:"flex xs12 md4 pl-2",attrs:{"hide-no-data":"",items:t.listQuanHuyen,"item-text":"quanHuyenTen","item-value":"quanHuyenMa",clearable:"",rules:t.required,required:"",outlined:"",label:"Quận/ Huyện",dense:"","hide-details":"auto"},model:{value:t.quanHuyen,callback:function(e){t.quanHuyen=e},expression:"quanHuyen"}}),a("v-autocomplete",{staticClass:"flex xs12 md4 pl-2",attrs:{"hide-no-data":"",items:t.listXaPhuong,"item-text":"phuongXaTen","item-value":"phuongXaMa",clearable:"",rules:t.required,required:"",outlined:"",label:"Phường/ Xã",dense:"","hide-details":"auto"},model:{value:t.xaPhuong,callback:function(e){t.xaPhuong=e},expression:"xaPhuong"}})],1)],1)],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{staticClass:"white--text mr-2",attrs:{color:"red",loading:t.loading,disabled:t.loading},on:{click:t.cancelAddMember}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" Thoát ")],1),a("v-btn",{staticClass:"mr-2",attrs:{color:"#0072bc",loading:t.loading,disabled:t.loading},on:{click:t.submitAddMember}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-content-save ")]),"add"===t.typeAction?a("span",[t._v("Thêm mới")]):a("span",[t._v("Cập nhật")])],1)],1)],1)],1)],1)],1):t._e()},i=[],o=(a("498a"),a("7db0"),a("cf9c")),s={name:"Users",components:{pagination:o["a"]},data:function(){return{loading:!1,loadingData:!1,dialogAddMember:!1,coSoYTeSearch:"",coSoYTe:"",thongTinDiaBan:{TenDiaBan:"",TinhThanh_Ma:"",TinhThanh_Ten:"",QuanHuyen_Ma:"",QuanHuyen_Ten:"",PhuongXa_Ma:"",PhuongXa_Ten:"",CoSoYTe_ID:""},listCoSoYTe:[],listTinhThanh:[],tinhThanh:"",listQuanHuyen:[],quanHuyen:"",listXaPhuong:[],xaPhuong:"",totalItem:0,page:0,pageCount:0,itemsPerPage:30,typeAction:"",userUpdate:"",items:[],validFormAdd:!0,required:[function(t){return!!String(t).trim()||"Thông tin bắt buộc"}],diaBanUpdate:"",headers:[{sortable:!1,text:"STT",align:"center",value:"index"},{sortable:!1,text:"Tên địa bàn",align:"center",value:"tenDiaBan"},{sortable:!1,text:"Tỉnh/ thành phố",value:"tinhThanhTen"},{sortable:!1,text:"Quận/ huyện",align:"center",value:"quanHuyenTen"},{sortable:!1,text:"Phường/ xã",align:"center",value:"phuongXaTen"},{sortable:!1,text:"Thao tác",align:"center",value:"action"}]}},created:function(){var t=this;t.$store.commit("SET_INDEXTAB",3),t.getCoSoYTe(),t.getDiaBanCoSo(),t.getTinhThanh()},watch:{tinhThanh:function(t){this.thongTinDiaBan.TinhThanh_Ma=t,this.getQuanHuyen(t)},quanHuyen:function(t){this.thongTinDiaBan.QuanHuyen_Ma=t,this.getXaPhuong(t)},xaPhuong:function(t){this.thongTinDiaBan.PhuongXa_Ma=t}},computed:{breakpointName:function(){return this.$store.getters.getBreakpointName}},methods:{getDiaBanCoSo:function(t,e){var a=this,n={id:e||-1,page:t,size:a.itemsPerPage};a.$store.dispatch("getDiaBanCoSo",n).then((function(t){a.items=t.hasOwnProperty("data")?t.data:[],a.totalItem=t.hasOwnProperty("total")?t.total:0,a.pageCount=Math.ceil(a.totalItem/a.itemsPerPage)}))},getCoSoYTe:function(){var t=this,e={};t.$store.dispatch("getCoSoYTe",e).then((function(e){t.listCoSoYTe=e||[]}))},getTinhThanh:function(){var t=this,e={};t.$store.dispatch("getDanhMucTinhThanh",e).then((function(e){t.listTinhThanh=e||[],t.tinhThanh&&t.getQuanHuyen(t.tinhThanh)}))},getQuanHuyen:function(t){var e=this;if(t){var a=e.listTinhThanh.find((function(e){return e.tinhThanhMa==t})),n={idParent:a["id"]};e.$store.dispatch("getDanhMucQuanHuyen",n).then((function(t){e.listQuanHuyen=t||[],e.quanHuyen&&e.getXaPhuong(e.quanHuyen)}))}},getXaPhuong:function(t){var e=this;if(t){var a=e.listQuanHuyen.find((function(e){return e.quanHuyenMa==t}));if(a){var n={idParent:a["id"]};e.$store.dispatch("getDanhMucXaPhuong",n).then((function(t){e.listXaPhuong=t||[]}))}}},addMember:function(t,e){var a=this;a.typeAction=t,a.dialogAddMember=!0,"add"===t?setTimeout((function(){a.$refs.formAddMember.reset(),a.$refs.formAddMember.resetValidation(),a.coSoYTeSearch&&(a.coSoYTe=a.coSoYTeSearch)}),200):(a.diaBanUpdate=e,setTimeout((function(){a.coSoYTe=a.diaBanUpdate.coSoYTeId,a.thongTinDiaBan.TenDiaBan=a.diaBanUpdate.tenDiaBan,a.tinhThanh=a.diaBanUpdate.tinhThanhMa,a.quanHuyen=a.diaBanUpdate.quanHuyenMa,a.xaPhuong=a.diaBanUpdate.phuongXaMa,a.$refs.formAddMember.resetValidation()}),200))},deleteUser:function(t){},formatDataInput:function(){var t=this;try{if(t.tinhThanh){var e=t.listTinhThanh.find((function(e){return e.tinhThanhMa==t.tinhThanh}));t.thongTinDiaBan.TinhThanh_Ma=t.tinhThanh,t.thongTinDiaBan.TinhThanh_Ten=e?e["tinhThanhTen"]:""}if(t.quanHuyen){var a=t.listQuanHuyen.find((function(e){return e.quanHuyenMa==t.quanHuyen}));t.thongTinDiaBan.QuanHuyen_Ma=t.quanHuyen,t.thongTinDiaBan.QuanHuyen_Ten=a?a["quanHuyenTen"]:""}if(t.xaPhuong){var n=t.listXaPhuong.find((function(e){return e.phuongXaMa==t.xaPhuong}));t.thongTinDiaBan.PhuongXa_Ma=t.xaPhuong,t.thongTinDiaBan.PhuongXa_Ten=n?n["phuongXaTen"]:""}t.thongTinDiaBan.CoSoYTe_ID=t.coSoYTe,console.log("thongTinDiaBan",t.thongTinDiaBan)}catch(i){t.processingAction=!1}},submitAddMember:function(){var t=this;if(t.$refs.formAddMember.validate())if(t.formatDataInput(),"add"===t.typeAction){var e={data:t.thongTinDiaBan};t.loading=!0,t.$store.dispatch("addDiaBanCoSo",e).then((function(e){t.loading=!1,t.dialogAddMember=!1,t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Thêm địa bàn thành công",color:"success"}),t.getDiaBanCoSo(0,t.coSoYTeSearch)})).catch((function(e){t.loading=!1,t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Thêm địa bàn y tế không thành công",color:"error"})}))}else{var a={id:t.diaBanUpdate["id"],data:t.thongTinDiaBan};t.loading=!0,t.$store.dispatch("updateDiaBanCoSo",a).then((function(){t.loading=!1,t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Cập nhật thành công",color:"success"}),t.dialogAddMember=!1,t.getDiaBanCoSo(0,t.coSoYTeSearch)})).catch((function(){t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Cập nhật thất bại",color:"error"})}))}},changePage:function(t){var e=this;e.page=t.page,e.getDiaBanCoSo(t.page,e.coSoYTeSearch)},cancelAddMember:function(){var t=this;t.dialogAddMember=!1}}},r=s,l=(a("8f51"),a("2877")),c=a("6544"),u=a.n(c),h=a("c6a6"),d=a("8336"),p=a("b0af"),g=a("99d9"),f=a("a523"),m=a("8fea"),v=a("169a"),b=a("0e8f"),T=a("4bd4"),x=a("132d"),_=a("a722"),y=a("2fa4"),B=a("8654"),S=a("71d9"),C=a("2a7f"),D=a("3a2f"),P=Object(l["a"])(r,n,i,!1,null,"fee32ae8",null);e["default"]=P.exports;u()(P,{VAutocomplete:h["a"],VBtn:d["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VContainer:f["a"],VDataTable:m["a"],VDialog:v["a"],VFlex:b["a"],VForm:T["a"],VIcon:x["a"],VLayout:_["a"],VSpacer:y["a"],VTextField:B["a"],VToolbar:S["a"],VToolbarItems:C["a"],VToolbarTitle:C["b"],VTooltip:D["a"]})},"2a7f":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("71d9"),i=a("80d2"),o=Object(i["h"])("v-toolbar__title"),s=Object(i["h"])("v-toolbar__items");n["a"]},"2fa4":function(t,e,a){"use strict";a("20f6");var n=a("80d2");e["a"]=Object(n["h"])("spacer","div","v-spacer")},"4bd4":function(t,e,a){"use strict";var n=a("5530"),i=(a("caad"),a("2532"),a("07ac"),a("4de4"),a("159b"),a("7db0"),a("58df")),o=a("7e2b"),s=a("3206");e["a"]=Object(i["a"])(o["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(i){i&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=a(t)))})):n.valid=a(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},5149:function(t,e,a){},"5e23":function(t,e,a){},"71d9":function(t,e,a){"use strict";var n=a("3835"),i=a("5530"),o=(a("a9e3"),a("0481"),a("5e23"),a("8dd9")),s=a("adda"),r=a("80d2"),l=a("d9bd");e["a"]=o["a"].extend({name:"v-toolbar",props:{absolute:Boolean,bottom:Boolean,collapse:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{default:48,type:[Number,String]},flat:Boolean,floating:Boolean,prominent:Boolean,short:Boolean,src:{type:[String,Object],default:""},tag:{type:String,default:"header"}},data:function(){return{isExtended:!1}},computed:{computedHeight:function(){var t=this.computedContentHeight;if(!this.isExtended)return t;var e=parseInt(this.extensionHeight);return this.isCollapsed?t:t+(isNaN(e)?0:e)},computedContentHeight:function(){return this.height?parseInt(this.height):this.isProminent&&this.dense?96:this.isProminent&&this.short?112:this.isProminent?128:this.dense?48:this.short||this.$vuetify.breakpoint.smAndDown?56:64},classes:function(){return Object(i["a"])(Object(i["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-toolbar":!0,"v-toolbar--absolute":this.absolute,"v-toolbar--bottom":this.bottom,"v-toolbar--collapse":this.collapse,"v-toolbar--collapsed":this.isCollapsed,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--flat":this.flat,"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.isProminent})},isCollapsed:function(){return this.collapse},isProminent:function(){return this.prominent},styles:function(){return Object(i["a"])(Object(i["a"])({},this.measurableStyles),{},{height:Object(r["g"])(this.computedHeight)})}},created:function(){var t=this,e=[["app","<v-app-bar app>"],["manual-scroll",'<v-app-bar :value="false">'],["clipped-left","<v-app-bar clipped-left>"],["clipped-right","<v-app-bar clipped-right>"],["inverted-scroll","<v-app-bar inverted-scroll>"],["scroll-off-screen","<v-app-bar scroll-off-screen>"],["scroll-target","<v-app-bar scroll-target>"],["scroll-threshold","<v-app-bar scroll-threshold>"],["card","<v-app-bar flat>"]];e.forEach((function(e){var a=Object(n["a"])(e,2),i=a[0],o=a[1];t.$attrs.hasOwnProperty(i)&&Object(l["a"])(i,o,t)}))},methods:{genBackground:function(){var t={height:Object(r["g"])(this.computedHeight),src:this.src},e=this.$scopedSlots.img?this.$scopedSlots.img({props:t}):this.$createElement(s["a"],{props:t});return this.$createElement("div",{staticClass:"v-toolbar__image"},[e])},genContent:function(){return this.$createElement("div",{staticClass:"v-toolbar__content",style:{height:Object(r["g"])(this.computedContentHeight)}},Object(r["r"])(this))},genExtension:function(){return this.$createElement("div",{staticClass:"v-toolbar__extension",style:{height:Object(r["g"])(this.extensionHeight)}},Object(r["r"])(this,"extension"))}},render:function(t){this.isExtended=this.extended||!!this.$scopedSlots.extension;var e=[this.genContent()],a=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return this.isExtended&&e.push(this.genExtension()),(this.src||this.$scopedSlots.img)&&e.unshift(this.genBackground()),t(this.tag,a,e)}})},"8f51":function(t,e,a){"use strict";a("5149")},a722:function(t,e,a){"use strict";a("20f6");var n=a("e8f2");e["a"]=Object(n["a"])("layout")}}]);